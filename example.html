<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./styles/example.css">
  <title>Accordion</title>
</head>

<body>
  <div class="container">
    <h1 class="heading">FAQ</h1>

    <div class="accordion-container">

      <button id="expandCollapseAllButton">Expand All</button>
      <!-- accordion 01 -->
      <div class="accordion active">
        <div class="accordion-heading">
          <h3>Accordion Heading 01</h3>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path
              d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
          </svg>
        </div>

        <!-- nested accordion -->
        <div class="accordion-content">

          <!-- 1st nested accordion start -->
          <div class="nested-accordion">
            <div class="nested-accordion-heading">
              <h3>Nested Accordion Heading 01</h3>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                  d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
              </svg>
            </div>

            <!-- nested accordion -->
            <div class="nested-accordion-content">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus, quod!</p>
            </div>
          </div>
          <!-- 1st nested accordion end -->

          <!-- 2nd nested accordion start -->
          <div class="nested-accordion">
            <div class="nested-accordion-heading">
              <h3>Nested Accordion Heading 02</h3>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                  d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
              </svg>
            </div>

            <!-- nested accordion -->
            <div class="nested-accordion-content">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus, quod!</p>
            </div>
          </div>
          <!-- 2nd nested accordion end -->

          <!-- 3rd nested accordion start -->
          <div class="nested-accordion">
            <div class="nested-accordion-heading">
              <h3>Nested Accordion Heading 03</h3>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                  d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
              </svg>
            </div>

            <!-- nested accordion -->
            <div class="nested-accordion-content">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus, quod!</p>
            </div>
          </div>
          <!-- 3rd nested accordion end -->
        </div>
      </div>

      <!-- accordion 02 -->
      <div class="accordion">
        <div class="accordion-heading">
          <h3>Accordion Heading 02</h3>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path
              d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
          </svg>
        </div>
        <p class="accordion-content">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium temporibus eveniet magnam, rerum velit
          iusto hic sint. Enim consequatur aliquam vel necessitatibus.
        </p>
      </div>

      <!-- accordion 03 -->
      <div class="accordion">
        <div class="accordion-heading">
          <h3>Accordion Heading 03</h3>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path
              d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
          </svg>
        </div>
        <p class="accordion-content">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium temporibus eveniet magnam, rerum velit
          iusto hic sint. Enim consequatur aliquam vel necessitatibus.
        </p>
      </div>

      <!-- accordion 04 -->
      <div class="accordion">
        <div class="accordion-heading">
          <h3>Accordion Heading 04</h3>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path
              d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
          </svg>
        </div>
        <p class="accordion-content">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium temporibus eveniet magnam, rerum velit
          iusto hic sint. Enim consequatur aliquam vel necessitatibus.
        </p>
      </div>

      <!-- accordion 05 -->
      <div class="accordion">
        <div class="accordion-heading">
          <h3>Accordion Heading 05</h3>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path
              d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
          </svg>
        </div>
        <p class="accordion-content">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium temporibus eveniet magnam, rerum velit
          iusto hic sint. Enim consequatur aliquam vel necessitatibus.
        </p>
      </div>

      <!-- accordion 06 -->
      <div class="accordion">
        <div class="accordion-heading">
          <h3>Accordion Heading 06</h3>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path
              d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
          </svg>
        </div>
        <p class="accordion-content">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium temporibus eveniet magnam, rerum velit
          iusto hic sint. Enim consequatur aliquam vel necessitatibus.
        </p>
      </div>

    </div>
  </div>

  <script>

    let accordions = document.querySelectorAll('.accordion')

    accordions.forEach(acco => {
      acco.onclick = (event) => {
        event.stopPropagation();
        let content = acco.querySelector('.accordion-content');

        // Check if this accordion has nested content
        let nestedContent = content.querySelector('.nested-accordion-content');
        if (nestedContent) {
          // If there's nested content, close it first
          let nestedAccordions = content.querySelectorAll('.nested-accordion');
          nestedAccordions.forEach(nest => {
            nest.classList.remove('active');
          });
        }

        // Toggle active class for the clicked accordion
        if (acco.classList.contains('active')) {
          acco.classList.remove('active')

        } else {
          acco.classList.add('active')
        }
      }

      let content = acco.querySelector('.accordion-content');
      content.onclick = (event) => {
        event.stopPropagation(); // Prevents event from bubbling up the DOM tree
      };
    })

    // nested accordion content
    let nestedAccordion = document.querySelectorAll('.nested-accordion')

    nestedAccordion.forEach(nest => {
      nest.onclick = () => {
        if (nest.classList.contains('active')) {
          nest.classList.remove('active')

        } else {
          nest.classList.add('active')
        }
      }
    })

    // expand all section
    function toggleAll() {
      let allExpanded = true; // Flag to check if all accordions are expanded
      let accordions = document.querySelectorAll('.accordion');
      accordions.forEach(acco => {
        if (!acco.classList.contains('active')) {
          allExpanded = false;
        }
      });

      // If at least one accordion is not expanded, expand all; otherwise, collapse all
      if (!allExpanded) {
        accordions.forEach(acco => {
          acco.classList.add('active');
          let nestedAccordions = acco.querySelectorAll('.nested-accordion');
          nestedAccordions.forEach(nest => {
            nest.classList.add('active');
          });
        });
      } else {
        accordions.forEach(acco => {
          acco.classList.remove('active');
          let nestedAccordions = acco.querySelectorAll('.nested-accordion');
          nestedAccordions.forEach(nest => {
            nest.classList.remove('active');
          });
        });
      }
    }

    document.getElementById('expandCollapseAllButton').addEventListener('click', toggleAll);
  </script>

</body>

</html>